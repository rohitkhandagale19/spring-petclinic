node {
    stage('checkout') {
        echo 'Checking out !!'
        git 'https://github.com/vamsibkrishna/spring-petclinic.git'
    }

    stage('build') {
        echo 'Building out !!'
        def mvnHome = 'C:/Users/pc/Downloads/apache-maven-3.6.3'
        def mavenCmd = "${mvnHome}/bin/mvn"
        env.PATH = "${mvnHome};c:/Windows/System32"

        bat script: "${mavenCmd} package", label: ''
    }

    stage('archiving') {
        echo 'Archiving out !!'
        archiveArtifacts artifacts: 'target/*.jar', allowEmptyArchive: true
    }

    post {
        always {
            echo 'Pipeline finished'
            step([$class: 'JUnitResultArchiver', testResults: '**/target/surefire-reports/*.xml'])
        }
    }
}
